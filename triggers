USE GYMASTER 
GO

CREATE TRIGGER TRG_TRANSACTION_INSERT
ON [TRANSACTION]
AFTER INSERT
AS
BEGIN
INSERT INTO TRANSACTION_LOG (TRANSACTION_ID, OPERATION, MODIFIEDDATE)
SELECT TRANSACTION_ID, 'INSERT', GETDATE()
FROM INSERTED
END
GO

CREATE TRIGGER TRG_TRANSACTION_UPDATE
ON [TRANSACTION]
AFTER UPDATE
AS
BEGIN
INSERT INTO TRANSACTION_LOG (TRANSACTION_ID, OPERATION, MODIFIEDDATE)
SELECT TRANSACTION_ID, 'UPDATE', GETDATE()
FROM INSERTED
END
GO

CREATE TRIGGER TRG_CLASS_DELETE
ON [TRANSACTION]
AFTER DELETE
AS
BEGIN
INSERT INTO TRANSACTION_LOG (TRANSACTION_ID, OPERATION, MODIFIEDDATE)
SELECT TRANSACTION_ID, 'DELETE', GETDATE()
FROM DELETED
END
GO
